<!DOCTYPE html>
<html lang="en">
<head>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
      <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.3/leaflet.draw.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.3/leaflet.draw.js'></script>
    <script src="Dependencies/Leaflet.MapboxVectorTile.js"></script>
    <link rel="stylesheet" type="text/css" href="IframeStyle.css">
</head>
<body>
    <div id='map1' class='map'></div>
    <script>
        L.mapbox.accessToken = 'pk.eyJ1IjoiZHIxMDEiLCJhIjoiY2s3NmgyOW90MDAxMjNsdDYzcDN2aTBtayJ9.kqqEBhzQp-uBB9_wtXizUA';
        var map = L.mapbox.map('map1', 'mapbox.streets')
        .setView([38.89399, -77.03659], 14);
        var url = 'https://api.airmap.com/maps/v4/tiles';

        var layers = ['airports_recreational', 'class_b', 'class_c', 'class_d', 'class_e0'];

        var layerString = layers.toString().split(',');

        var mvtSource = new L.TileLayer.MVTSource({
        url: url + '/' + layerString + "/{z}/{x}/{y}.pbf?apikey=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVkZW50aWFsX2lkIjoiY3JlZGVudGlhbHxtUTV5TW56SUVBQXlLS2NwYncwdkpUZzVHYnYzIiwiYXBwbGljYXRpb25faWQiOiJhcHBsaWNhdGlvbnw3ZFlvT1BFSFdhZW92aVlhRUpsa2NSZFlQcHAiLCJvcmdhbml6YXRpb25faWQiOiJkZXZlbG9wZXJ8eG1BbDUyY3hOZ05XUElEeEE3RUpjME15N1A2IiwiaWF0IjoxNTgyOTE4NzA5fQ.cI5TcaFZV39QPrAIs2fZtLMgdmVa3I79VPIpDHcnPuo",
        clickableLayers: ["layers"],
        getIDForLayerFeature: function(feature) {
            return feature.properties.id;
        },

        style: function(feature) {
            var layer = feature.properties.type;
            return getStyle(layer);
        }

        });

        //Add layer
        map.addLayer(mvtSource);

        function getStyle(layer) {
        var style = {};
        switch (layer) {
            case 'airports_recreational':
            case 'airports_recreational_private':
            case 'airports_commercial':
            case 'airports_commercial_private':
            case 'hospitals':
            case 'heliports':
            case 'power_plants':
            case 'schools':
            style.color = 'rgba(246, 165, 23, 0.2)';
            style.outline = {
                color: 'rgb(246, 165, 23)',
                size: 0
            }
            break;
            case 'national_parks':
            case 'noaa':
            style.color = 'rgba(224, 18, 18, 0.2)';
            style.outline = {
                color: 'rgb(224, 18, 18)',
                size: 0
            }
            break;
            case 'sua_restricted':
            case 'sua_prohibited':
            style.color = 'rgba(27, 90, 207, 0.2)';
            style.outline = {
                color: 'rgb(27, 90, 207)',
                size: 0
            }
            break;
            case 'class_b':
            style.color = 'rgba(26, 116, 179, 0.2)';
            style.outline = {
                color: 'rgb(26, 116, 179)',
                size: 0
            }
            break;
            case 'class_c':
            style.color = 'rgba(155, 108, 157, 0.3)';
            style.outline = {
                color: 'rgb(155, 108, 157)',
                size: 0
            }
            break;
            case 'class_d':
            style.color = 'rgba(26, 116, 179, 0.2)';
            style.outline = {
                color: 'rgb(26, 116, 179)',
                size: 0
            }
            break;
            case 'class_e0':
            style.color = 'rgba(155, 108, 157, 0.2)';
            style.outline = {
                color: 'rgb(155, 108, 157)',
                size: 0
            }
            break;
        }

        return style;
        }
    </script>
</body>