<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
        integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
        crossorigin=""></script>
    <link href="https://cdn.osmbuildings.org/4.0.7/OSMBuildings.css" rel="stylesheet">
    <script src="https://cdn.osmbuildings.org/4.0.7/OSMBuildings.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" href="IframeStyle.css">
</head>
<body>
    <!--Required for this map to be controlled-->
    <script>const MAPNUMBER = 3; //refers to whatever map in the grid this refers to</script>
    <script src="Dependencies/mouseDown.js"></script>
    <script>thisMapNumber=MAPNUMBER; //changes a variable in the mouseDown.js script</script>
    <!------------------------------------------>
    <div id='map3' class='map'>
    </div>
    <script>
        var buildingmap = new OSMBuildings({
          container: 'map3',
          position: { latitude: parent.view.lat, longitude: parent.view.lng },
          zoom: 15,
          minZoom: 15,
          maxZoom: 20,
          tilt: 40,
          effects: ['shadows'],
          attribution: '© Data <a href="https://openstreetmap.org/copyright/">OpenStreetMap</a> © Map <a href="https://mapbox.com/">Mapbox</a> © 3D <a href="https://osmbuildings.org/copyright/">OSM Buildings</a>'
        });


        buildingmap.addMapTiles('https://api.mapbox.com/styles/v1/osmbuildings/cjt9gq35s09051fo7urho3m0f/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1Ijoib3NtYnVpbGRpbmdzIiwiYSI6IjNldU0tNDAifQ.c5EU_3V8b87xO24tuWil0w');
        buildingmap.addGeoJSONTiles('https://{s}.data.osmbuildings.org/0.2/dixw8kmb/tile/{z}/{x}/{y}.json');

        console.log(buildingmap)

        //updates controller----------------------------------------------
        buildingmap.on("move", function () {
            parent.setGlobalPosition({ lat: buildingmap.position.latitude, lng: buildingmap.position.longitude },MAPNUMBER);
        });
        //----------------------------------------------------------------
    </script>

    <!--You must add this map's setter function-->
    <script>
        var thisMapsSetter = function(view,zoom){
          console.log(view)
          buildingmap.setPosition({ latitude: view.lat, longitude: view.lng-360 });
        }
        parent.setterFunctions.push({
            setterFunc: thisMapsSetter,
            mapNum: MAPNUMBER
        });
    </script>
</body>
